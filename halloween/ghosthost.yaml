
global:
    language: en
    language_text_source: |
        function() {
            return (global.language && feature['name:'+global.language]) || feature.name;
        }
    sort_rank: |
        function() {
            return (feature.sort_rank)
            }
    colors:
        green: '#97DBB6'
        blue-green: '#46919E'
        blue: '#375A80'
        purple: '#38315F'
        dark-purple: '#252138'


scene:
    background:
        color: '#252138'

fonts:
    Creepster:
        # regular
        - weight: 400
          url: https://cdn.jsdelivr.net/gh/google/fonts/apache/creepstercaps/CreepsterCaps-Regular.ttf
    Gruesa:
        #regular
        - weight: 400
          url: https://cdn.jsdelivr.net/gh/google/fonts/ofl/averiagruesalibre/AveriaGruesaLibre-Regular.ttf


textures:
    pink:
        filtering: mipmap
        url: img/pink.gif
    teal:
        filtering: mipmap
        url: img/teal.gif
styles:
    pink-style:
        base: points
        texture: pink
    teal-style:
        base: points
        texture: teal

sources:
    here:
        type: MVT
        url: https://vector.hereapi.com/v2/vectortiles/base/mc/{z}/{x}/{y}/omv?xnlp=CL_JSMv3.1.4.0&apikey=Vqc9lMSRjkBhuO_waDvYexsb52_S2E0k8Gn5J_-TsoM&mv=97
    hcity:
        url: https://xyz.api.here.com/hub/spaces/ZQuY98FS/tile/web/{z}_{x}_{y}
        url_params:
            access_token: AAUbSz5dHyw5tTcORSwp9ME
            clip: true
        type: GeoJSON
    spirit:
        url: https://xyz.api.here.com/hub/spaces/dhGZiRwZ/tile/web/{z}_{x}_{y}
        url_params:
            access_token: AAUbSz5dHyw5tTcORSwp9ME
            clip: true
        type: GeoJSON

layers:
    water:
        data: { source: here, layer: water }
        water fill:
            filter:
                - $geometry: polygon
            draw:
                polygons:
                    order: global.sort_rank
                    color: '#38315F'

        rivers:
            filter:
                all:
                - $geometry: line
                - $zoom: { min: 14 }
            draw:
                text:
                    font:
                        family: Gruesa
                        text_source: global.language_text_source
                        text_wrap: 10
                        order: global.sort_rank
                        size: [[14, 10px], [17, 14px]]
                        priority: 100
                        fill: '#38315F'
        lakes:
            filter:
                all:
                - function() {return feature.min_zoom + 2 <= ($zoom) }
                - $geometry: point
            draw:
                text:
                    font:
                        family: Gruesa
                        text_source: global.language_text_source
                        transform: uppercase
                        text_wrap: 3
                        order: global.sort_rank
                        size: [[5, 10px], [10, 24px]]
                        priority: 100
                        fill: '#252138'



    spirit:
        data: {source: spirit}
        enabled: true
        draw:
            points:
                interactive: true
                order: 1000
                collide: false
                style: pink-style
                size: [
                        [3,  '14px'],
                        [8,  '18px'],
                        [13, '24px'],
                        [18, '30px']]
    hcity:
        data: {source: hcity}
        enabled: true
        draw:
            points:
                interactive: true
                order: 1000
                collide: false
                style: teal-style
                size: [
                        [3,  '14px'],
                        [8,  '18px'],
                        [13, '24px'],
                        [18, '30px']]
    country:
        data: { source: here , layer: places }
        filter:
            all:
            - function() {return feature.min_zoom <= ($zoom)}
            - kind: country
        draw:
            text:
                text_source: global.language_text_source
                text_wrap: 30
                priority: 10
                font:
                    family: Creepster
                    size: [
                        [1, 18],
                        [4, 24],
                        [8, 36]
                        ]
                    fill: [1.000, 1.000, 1.000, 1.00]
                    stroke: {
                        color: '#38315F',
                        width: 5.5px
                        }
                    transform: uppercase
                    weight: 400

    locality_10million_capital:
        data: { source: here , layer: places}
        filter: function() { return ((((feature.kind == 'locality' )&& feature.population) && (feature.population > 10000000 || feature.country_capital))&& feature.country_capital)}
        draw:
            text:
                text_source: global.language_text_source
                text_wrap: 30
                priority: 39
                font:
                    family: Creepster
                    weight: bold
                    size: [
                        [1, 9.6],
                        [2, 11.2],
                        [3, 12.8],
                        [4, 14.4],
                        [5, 16],
                        [6, 19.2],
                        [7, 22.4],
                        [8, 25.6],
                        [9, 28.8],
                        [10, 32]
                        ]
                    fill: [1.000, 1.000, 1.000, 1.00]
                    stroke: {
                        color: '#38315F',
                        width: 5.5px
                        }
    locality_10million:
        data: { source: here , layer: places}
        filter: function() { return ((feature.kind == 'locality' && feature.population) && (feature.population > 10000000 || feature.country_capital))}
        draw:
            text:
                text_source: global.language_text_source
                text_wrap: 30
                priority: 39
                font:
                    size: [
                        [1, 9.6],
                        [2, 11.2],
                        [3, 12.8],
                        [4, 14.4],
                        [5, 16],
                        [6, 19.2],
                        [7, 22.4],
                        [8, 25.6],
                        [9, 28.8],
                        [10, 32]
                        ]
                    fill: [1.000, 1.000, 1.000, 1.00]
                    family: Creepster
                    stroke: {
                        color: '#38315F',
                        width: [
                            [4, 1.5],
                            [6, 2],
                            [10, 4],
                            [12, 5]
                        ]
                        }

    locality_label_1million:
        data: { source: here , layer: places}
        filter: function() { return (feature.kind = 'locality' && feature.population && (feature.region_capital || feature.population > 1000000))}
        draw:
            text:
                text_source: global.language_text_source
                text_wrap: 30
                priority: 40
                font:
                    size: [
                        [2, 9.6],
                        [3, 11.2],
                        [4, 12.8],
                        [5, 14.4],
                        [6, 16],
                        [7, 19.2],
                        [8, 22.4],
                        [9, 25.6],
                        [10, 28.8],
                        [11, 32]
                        ]
                    fill: [1.000, 1.000, 1.000, 1.00]
                    family: Gruesa
                    stroke: {
                        color: '#38315F',
                        width: [
                            [2, 1],
                            [4, 1.5],
                            [6, 2],
                            [10, 4],
                            [12, 5]
                        ]
                        }


    locality_label_400k:
        data: { source: here , layer: places}
        filter: function() { return (feature.kind = 'locality' && feature.population && feature.population > 400000)}
        draw:
            text:
                text_source: global.language_text_source
                text_wrap: 30
                priority: 41
                font:
                    size: [
                        [4, 11.2],
                        [5, 12.8],
                        [6, 16],
                        [7, 19.2],
                        [8, 22.4],
                        [9, 24],
                        [10, 25.6],
                        [11, 27.2]
                        ]
                    fill: [1.000, 1.000, 1.000, 1.00]
                    family: Gruesa
                    stroke: {
                        color: '#38315F',
                        width: [
                            [4, 1],
                            [6, 2],
                            [8, 3],
                            [10, 4],
                            [12, 5]
                        ]
                        }

    locality_label_100k:
        data: { source: here , layer: places}
        filter:
            all:
                - function() { return (feature.kind = 'locality' && feature.population > 100000)}
                - $zoom: {min: 5}
        draw:
            text:
                text_source: global.language_text_source
                text_wrap: 30
                priority: 42
                font:
                    family: Gruesa
                    weight: 400
                    size: [
                        [4, 9.6],
                        [5, 11.2],
                        [6, 12.8],
                        [7, 16],
                        [8, 19.2],
                        [9, 20.8],
                        [10, 22.4],
                        [11, 24],
                        [12, 25.6]
                        ]
                    fill: [1.000, 1.000, 1.000, 1.00]
                    stroke: {
                        color: '#38315F',
                        width: [
                            [5, 1],
                            [8, 3],
                            [10, 4],
                            [12, 5]
                        ]
                        }

    locality_label_50k:
        data: { source: here , layer: places}
        filter:
            all:
                - function() { return (feature.kind = 'locality' && feature.population > 50000)}
                - $zoom: {min: 5}
        draw:
            text:
                text_source: global.language_text_source
                text_wrap: 30
                priority: 43
                font:
                    family: Gruesa
                    size: [
                        [10, 16],
                        [11, 19.2],
                        [12, 22.4],
                        [13, 24]
                        ]
                    fill: [1.000, 1.000, 1.000, 1.00]
                    stroke: {
                        color: '#38315F',
                        width: [
                            [10, 2],
                            [12, 3]
                        ]
                        }

    locality_label_10k:
        data: { source: here , layer: places}
        filter:
            all:
                - function() { return (feature.kind = 'locality' && feature.population > 10000)}
                - $zoom: {min: 9}
        draw:
            text:
                text_source: global.language_text_source
                text_wrap: 30
                priority: 44
                font:
                    family: Gruesa
                    size: [
                        [11, 16],
                        [12, 17.6],
                        [13, 19.2],
                        [14, 20.8],
                        [15, 22.4]
                        ]
                    fill: [1.000, 1.000, 1.000, 1.00]
                    stroke: {
                        color: '#38315F',
                        width: [
                            [10, 2],
                            [12, 3]
                        ]
                        }

    locality_label:
        data: { source: here , layer: places}
        filter:
            all:
                - function() { return (feature.kind = 'locality' && feature.population <= 10000)}
                - $zoom: {min: 11}
        draw:
            text:
                text_source: global.language_text_source
                priority: 50
                font:
                    size: [
                        [11, 12.8],
                        [12, 14.4],
                        [13, 16],
                        [14, 17.6],
                        [15, 19.2]
                        ]
                    fill: [1.000, 1.000, 1.000, 1.00]
                    family: Gruesa
                    stroke: {
                        color: '#38315F',
                        width: 2px
                        }
