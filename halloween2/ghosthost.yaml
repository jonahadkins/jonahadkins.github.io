
global:
    language: en
    language_text_source: |
        function() {
            return (global.language && feature['name:'+global.language]) || feature.name;
        }
    sort_rank: |
        function() {
            return (feature.sort_rank)
            }
    colors:
        green: '#97DBB6'
        blue-green: '#46919E'
        blue: '#375A80'
        purple: '#38315F'
        dark-purple: '#252138'

scene:
    animated: true
    background:
        color: '#252138'

fonts:
    Creepster:
        # regular
        - weight: 400
          url: https://cdn.jsdelivr.net/gh/google/fonts/apache/creepstercaps/CreepsterCaps-Regular.ttf
    Gruesa:
        #regular
        - weight: 400
          url: https://cdn.jsdelivr.net/gh/google/fonts/ofl/averiagruesalibre/AveriaGruesaLibre-Regular.ttf

textures:
    pink:
        animated: true
        url: https://cdn.jsdelivr.net/gh/jonahadkins/jonahadkins.github.io@master/halloween2/img/pink.gif?raw=true
    teal:
        animated: true
        filtering: mipmap
        url: https://cdn.jsdelivr.net/gh/jonahadkins/jonahadkins.github.io@master/halloween2/img/teal.gif?raw=true
styles:
    _transparent:
        base: polygons
        blend: opaque
    pink-style:
        animated: true
        base: points
        texture: pink
    teal-style:
        animated: true
        base: points
        texture: teal

sources:
    here:
        type: MVT
        url: https://api.protomaps.com/tiles/v2/{z}/{x}/{y}.pbf?key=2aa144ac9bf15280
    maptiler:
        type: MVT
        url: https://api.maptiler.com/tiles/v3/{z}/{x}/{y}.pbf?key=p41h4rA12BGTJ06cRHuR
    hcity:
        url: https://raw.githubusercontent.com/jonahadkins/jonahadkins.github.io/master/halloween2/data/halloween-city.geojson
        type: GeoJSON
    spirit:
        url: https://raw.githubusercontent.com/jonahadkins/jonahadkins.github.io/master/halloween2/data/spirit-halloween.geojson
        type: GeoJSON

layers:
    water:
        data: { source: here}
        draw:
            polygons:
                order: 2
                color: '#38315F'

    pink-dots:
        data: {source: spirit}
        filter:
            all:
            - $geometry: point
            - { $zoom: { min: 1, max: 8 } }
        draw:
            points:
                blend_order: -4
                interactive: true
                color: [1.000, 0.639, 0.894, 1.00]
                collide: false
                size: [
                        [3,  '2px'],
                        [8,  '12px']]
    pink-ghosts:
        data: {source: spirit}
        filter:
            all:
            - $geometry: point
            - { $zoom: { min: 8, max: 19 } }
        draw:
            points:
                blend_order: -4
                interactive: true
                color: none
                collide: false
                style: pink-style
                size: [
                        [8,  '24px'],
                        [13, '48px'],
                        [18, '72px']]
    teal-dots:
        data: {source: hcity}
        filter:
            all:
            - $geometry: point
            - { $zoom: { min: 1, max: 8 } }
        draw:
            points:
                blend_order: -2
                interactive: true
                color: [0.094, 0.773, 0.910, 1.00]
                collide: false
                size: [
                        [3,  '2px'],
                        [8,  '12px']]
    teal-ghosts:
        data: {source: hcity}
        filter:
            all:
            - $geometry: point
            - { $zoom: { min: 8, max: 19 } }
        draw:
            points:
                blend_order: -2
                interactive: true
                color: none
                collide: false
                style: teal-style
                size: [
                        [8,  '24px'],
                        [13, '48px'],
                        [18, '72px']]
    urban_area:
        data: { source: maptiler , layer: landuse}
        filter:
            all:
            - $geometry: polygon
            - class: residential
        draw:
            polygons:
                color: [0.169, 0.153, 0.243, 1.00]
                order: 8
    aerodrome:
        data: { source: here , layer: landuse}
        filter:
            all:
            - $geometry: polygon
            - aeroway: aerodrome
        draw:
            polygons:
                color: '#375A80'
                order: 3
    runway:
        data: { source: here , layer: landuse}
        filter:
            all:
            - $geometry: polygon
            - aeroway: runway
        draw:
            polygons:
                color: '#46919E'
                order: 10
    runwayline:
        data: { source: here , layer: transit}
        filter:
            all:
            - $geometry: line
            - aeroway: runway
        draw:
            lines:
                color: '#46919E'
                order: 10
                width: [
                        [8, 0.9px],
                        [11,2px],
                        [14, 5px]
                        ]
    minor_road:
        data: {source: here, layer: roads}
        filter:
            - pmap:kind: minor_road

        draw:
            road_line:
                style: lines
                color: '#46919E'
                order: 12
                width: [
                        [8, 0.01px],
                        [14, 0.5px],
                        [17, 2px]
                        ]
        label:
            filter:
                - $zoom: { min: 14 }
            draw:
                text:
                    font:
                        text_source: global.language_text_source
                        family: Gruesa
                        size: 8
                        priority: 15
                        fill: '#FFF'
                        stroke: {color: '#000', width: 1
                        }
    medium:
        data: {source: here, layer: roads}
        filter:
            - pmap:kind: medium_road
        draw:
            road_line:
                style: lines
                color: '#46919E'
                order: 15
                width: [
                        [8, 0.11px],
                        [14, 1px],
                        [17, 3px]
                        ]
        label:
            filter:
                - $zoom: { min: 13 }
            draw:
                text:
                    font:
                        text_source: global.language_text_source
                        family: Gruesa
                        size: 9
                        priority: 15
                        fill: '#FFF'
                        stroke: {color: '#000', width: 1
                        }

    major:
        data: {source: here, layer: roads}
        filter:
            - pmap:kind: major_road
        draw:
            road_line:
                style: lines
                color: '#46919E'
                order: 20
                width: [
                        [8, 0.4px],
                        [14, 2px],
                        [17, 6px]
                        ]
        label:
            filter:
                all:
                - $zoom: {min: 12}
            draw:
                text:
                    repeat_distance: 100px
                    font:
                        text_source: global.language_text_source
                        family: Gruesa
                        size: 10
                        priority: 25
                        fill: '#FFF'
                        stroke: {color: '#000', width: 1
                        }
    highway:
        data: {source: here, layer: roads}
        filter:
            - pmap:kind: highway
        draw:
            road_line:
                style: lines
                color: '#46919E'
                order: 30
                width: [
                        [8, 0.4px],
                        [14, 2px],
                        [17, 6px]
                        ]
        label:
            filter:
                all:
                - $zoom: {min: 12}
            draw:
                text:
                    #repeat_distance: 100px
                    font:
                        text_source: global.language_text_source
                        family: Gruesa
                        size: 12
                        priority: 15
                        fill: '#FFF'
                        stroke: {color: '#000', width: 1
                        }
    country_border:
        data: { source: here, layer: boundaries }
        filter:
            - pmap:min_admin_level: 2
        draw:
            boundary_case:
                style: lines
                color: [0.322, 0.404, 0.431, 1.00]
                order: 40
                width: [
                        [1, 20000],
                        [2, 16000],
                        [3, 14000],
                        [4, 10000],
                        [5, 6000],
                        [6, 4000],
                        [7, 2000],
                        [8, 1000],
                        [9, 500],
                        [10, 240],
                        [11, 160],
                        [12, 80],
                        [13, 40],
                        [14, 20]
                        ]
            boundary_fill:
                style: lines
                color: '#2F444B'
                order: 44
                width: [
                        [2, 4000],
                        [3, 2800],
                        [4, 2000],
                        [5, 1000],
                        [6, 440],
                        [7, 180],
                        [8, 100],
                        [9, 60],
                        [10, 40],
                        [11, 30],
                        [12, 20],
                        [13, 10],
                        [14, 4]
                        ]


    state:
        data: { source: here, layer: boundaries }
        filter:
            - pmap:min_admin_level: 4
        draw:
            border_line:
                style: lines
                color: '#38315F'
                order: 55
                width: [
                        [8, 1px],
                        [14, 4px],
                        [17, 8px]
                        ]
    country:
        data: { source: here , layer: places }
        filter:
            - pmap:kind: country
        draw:
            text:
                text_source: global.language_text_source
                text_wrap: 30
                priority: 10
                font:
                    family: Creepster
                    size: [
                        [1, 18],
                        [4, 24],
                        [8, 36]
                        ]
                    fill: '#97DBB6'
                    stroke: {
                        color: '#38315F',
                        width: 8px
                        }
                    transform: uppercase
                    weight: 400

    locality_10million_capital:
        data: { source: here , layer: places}
        filter: function() { return ((((feature.kind == 'locality' )&& feature.population) && (feature.population > 10000000 || feature.country_capital))&& feature.country_capital)}
        draw:
            text:
                text_source: global.language_text_source
                text_wrap: 30
                priority: 39
                font:
                    family: Creepster
                    weight: bold
                    size: [
                        [1, 9.6],
                        [2, 11.2],
                        [3, 12.8],
                        [4, 14.4],
                        [5, 16],
                        [6, 19.2],
                        [7, 22.4],
                        [8, 25.6],
                        [9, 28.8],
                        [10, 32]
                        ]
                    fill: '#97DBB6'
                    stroke: {
                        color: '#38315F',
                        width: 8px
                        }
    locality_10million:
        data: { source: here , layer: places}
        filter: function() { return ((feature.kind == 'locality' && feature.population) && (feature.population > 10000000 || feature.country_capital))}
        draw:
            text:
                text_source: global.language_text_source
                text_wrap: 30
                priority: 39
                font:
                    size: [
                        [1, 9.6],
                        [2, 11.2],
                        [3, 12.8],
                        [4, 14.4],
                        [5, 16],
                        [6, 19.2],
                        [7, 22.4],
                        [8, 25.6],
                        [9, 28.8],
                        [10, 32]
                        ]
                    fill: '#97DBB6'
                    family: Creepster
                    stroke: {
                        color: '#38315F',
                        width: 8px
                        }

    locality_label_1million:
        data: { source: here , layer: places}
        filter: function() { return (feature.kind = 'locality' && feature.population && (feature.region_capital || feature.population > 1000000))}
        draw:
            text:
                text_source: global.language_text_source
                text_wrap: 30
                priority: 40
                font:
                    size: [
                        [2, 9.6],
                        [3, 11.2],
                        [4, 12.8],
                        [5, 14.4],
                        [6, 16],
                        [7, 19.2],
                        [8, 22.4],
                        [9, 25.6],
                        [10, 28.8],
                        [11, 32]
                        ]
                    fill: '#97DBB6'
                    family: Creepster
                    weight: 100
                    stroke: {
                        color: '#38315F',
                        width: 2px
                        }


    locality_label_400k:
        data: { source: here , layer: places}
        filter:
            all:
                - function() { return (feature.population && feature.population > 400000)}
                - $zoom: {min: 6}
        draw:
            text:
                text_source: global.language_text_source
                text_wrap: 30
                priority: 41
                font:
                    size: [
                        [4, 11.2],
                        [5, 12.8],
                        [6, 16],
                        [7, 19.2],
                        [8, 22.4],
                        [9, 24],
                        [10, 25.6],
                        [11, 27.2]
                        ]
                    fill: '#97DBB6'
                    family: Creepster
                    stroke: {
                        color: '#38315F',
                        width: 2px
                        }

    locality_label_100k:
        data: { source: here , layer: places}
        filter:
            all:
                - function() { return (feature.population && feature.population > 100000)}
                - $zoom: {min: 7}
        draw:
            text:
                text_source: global.language_text_source
                text_wrap: 30
                priority: 42
                font:
                    family: Gruesa
                    weight: 400
                    size: [
                        [4, 9.6],
                        [5, 11.2],
                        [6, 12.8],
                        [7, 16],
                        [8, 19.2],
                        [9, 20.8],
                        [10, 22.4],
                        [11, 24],
                        [12, 25.6]
                        ]
                    fill: '#97DBB6'
                    stroke: {
                        color: '#38315F',
                        width: 4px
                        }

    locality_label_50k:
        data: { source: here , layer: places}
        filter:
            all:
                - function() { return (feature.population && feature.population > 50000)}
                - $zoom: {min: 8}
        draw:
            text:
                text_source: global.language_text_source
                text_wrap: 30
                priority: 43
                font:
                    family: Gruesa
                    size: [
                        [10, 16],
                        [11, 19.2],
                        [12, 22.4],
                        [13, 24]
                        ]
                    fill: '#97DBB6'
                    stroke: {
                        color: '#38315F',
                        width: 4px
                        }

    locality_label_10k:
        data: { source: here , layer: places}
        filter:
            all:
                - function() { return (feature.population && feature.population > 10000)}
                - $zoom: {min: 9}
        draw:
            text:
                text_source: global.language_text_source
                text_wrap: 30
                priority: 44
                font:
                    family: Gruesa
                    size: [
                        [11, 16],
                        [12, 17.6],
                        [13, 19.2],
                        [14, 20.8],
                        [15, 22.4]
                        ]
                    fill: '#97DBB6'
                    stroke: {
                        color: '#38315F',
                        width: 2px
                        }

    locality_label:
        data: { source: here , layer: places}
        filter:
            all:
                - pmap:kind: neighbourhood
                - $zoom: {min: 11}
        draw:
            text:
                text_source: global.language_text_source
                priority: 50
                font:
                    size: [
                        [11, 12.8],
                        [12, 14.4],
                        [13, 16],
                        [14, 17.6],
                        [15, 19.2]
                        ]
                    fill: '#97DBB6'
                    family: Gruesa
                    stroke: {
                        color: '#38315F',
                        width: 2px
                        }


    building_outline:
        data: { source: here, layer: buildings }
        draw:
            lines:
                color: [1.000, 1.000, 1.000, 1.00]
                order: 100
                width: 1

    building_extrusion:
        data: { source: here , layer: buildings}
        draw:
            _transparent:
                color: [0.216, 0.353, 0.502, 0.70]
                order: 100
                extrude: function() { return feature.height; }
